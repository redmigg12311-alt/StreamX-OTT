<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Clappr Player | StreamX</title>

    <!-- Clappr CDN -->
    <script src="https://cdn.jsdelivr.net/npm/clappr@latest/dist/clappr.min.js"></script>

    <style>
      :root {
        --primary-color: #00e5ff;
      }

      * {
        margin: 0;
        padding: 0;
        font-family: "Space Grotesk", sans-serif;
      }

      body {
        background-color: black;
        color: #fff;
      }

      #player {
        width: 100%;
        max-width: 1000px;
        aspect-ratio: 16 / 9;
        border-radius: 8px;
        overflow: hidden;
        margin: 20px auto;
        box-shadow: 0 0 10px var(--theme-color);
        margin-top: 80px;
      }

      /* Clappr Custom Controls */
      .clappr-watermark,
      .clappr-playback-rate-selector,
      .clappr-play-pause-button,
      .clappr-loader-spinner,
      .clappr-icon,
      .clappr-control-bar {
        filter: hue-rotate(180deg) brightness(1.2) saturate(2);
      }

      /* Mobile Responsive Adjustments */
      @media (max-width: 768px) {
        #player {
          height: calc(100vh - 100px);
        }
      }

      @media (max-width: 480px) {
        #player {
          height: calc(100vh - 80px);
        }
      }

      .clappr-core .media-control .scrubber .pointer {
        background-color: var(--primary-color) !important;
        border: 2px solid #fff;
      }
    </style>
  </head>

  <body>
    <!-- Header -->
    <div id="header-placeholder">üì∫ StreamX Clappr Player</div>

    <!-- Clappr Player Container -->
    <div id="player"></div>

    <!-- Footer -->
    <div id="footer-container">¬© 2025 StreamX - Powered by Clappr</div>

    <script>
      const urlParams = new URLSearchParams(window.location.search);
      const videoSrc = urlParams.get("src");

      if (videoSrc) {
        const player = new Clappr.Player({
          source: videoSrc,
          parentId: "#player",
          autoPlay: true,
          width: "100%",
          height: "100%",
          mute: false,
          mimeType: "application/x-mpegURL",
          poster: "",

          playback: {
            hlsjsConfig: {
              maxBufferLength: 30,
              maxMaxBufferLength: 600,
            },
          },
          // Optional Plugins can be added here
        });
      } else {
        document.getElementById("player").innerHTML =
          "<p style='color: white; text-align: center;'>‚ö†Ô∏è No video source provided.</p>";
      }
    </script>

    <!-- Inject Header -->
    <script>
      fetch("header.html")
        .then((res) => res.text())
        .then((data) => {
          document.getElementById("header-placeholder").innerHTML = data;
          const toggleBtn = document.querySelector(".menu-toggle");
          const menuBar = document.getElementById("menuBar");
          if (toggleBtn && menuBar) {
            toggleBtn.addEventListener("click", () => {
              menuBar.classList.toggle("show");
            });
          }
        });
    </script>

    <!-- Footer Injection -->
    <script>
      fetch("footer.html")
        .then((res) => res.text())
        .then((data) => {
          document.getElementById("footer-container").innerHTML = data;
        });
    </script>
  </body>
</html>
